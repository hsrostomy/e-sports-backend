<!DOCTYPE html>
<html lang=”en”>

<head>
    <link rel="shortcut icon" type="image/png" href="img/logo-turing.png">

    <title>QR CODE - Turing Technologies</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title></title>
</head>

<body style="margin: 50px; height: 100%;">

    <h1>télécharger votre code QR</h1>
    <div class="container">
        <div class="center">

            <img width="400" src="https://turing-technologies.com/qr_images/<%= member.qr_pic %>">

        </div>
        <button type="button" onclick="downloadImage('<%= member.qr_pic %>')" class="btn btn-success"
            style="margin-left: 50px">télécharger le
            code QR</button>

    </div>


    <script>
        const downloadImage = (img) => {
            console.log(`https://turing-technologies.com/qr_images/${img}`)
            const url = `https://turing-technologies.com/qr_images/${img}`;
            var xhr = new XMLHttpRequest();
            xhr.open("GET", `https://turing-technologies.com/qr_images/${img}`, true);
            xhr.responseType = "blob";
            xhr.onload = function () {
                var urlCreator = window.URL || window.webkitURL;
                var imageUrl = urlCreator.createObjectURL(this.response);
                var tag = document.createElement('a');
                tag.href = imageUrl;
                tag.download = img;
                document.body.appendChild(tag);
                tag.click();
                document.body.removeChild(tag);
            }
            xhr.send();
        }
    </script>
</body>

</html>